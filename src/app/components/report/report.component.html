<div class="topbar">
  <div class="container">
    <div class="row">
      <form class="col-md-12 select" action="index.html" method="post">
        <strong>Moodle:</strong>
        <mat-form-field class="mat-form" >
          <mat-select [(ngModel)]="form_moodle" name="form_moodle" (change)="getCourses()">
            <mat-option *ngFor="let moodle of moodles let i = index" [value]="moodle">{{moodle.name}}</mat-option>
          </mat-select>
        </mat-form-field>
        <strong>Curso:</strong>
        <mat-form-field class="mat-form">
          <mat-select [(ngModel)]="form_courseid" name="form_courseid" (change)="report(form_courseid)">
            <mat-option  *ngFor="let course of courses let i = index" [value]="i">{{course.fullname}}</mat-option>
          </mat-select>
        </mat-form-field>
      </form>
    </div>
  </div>
</div>

<div class="container" *ngIf="isReady">
  <div class="row">
    <div class="col-md-12 title" >
      <h2>{{course.fullname}}</h2>
      <p >Alunos matriculados: {{enrolledUsers.length}}</p>
    </div>
  </div>
  <div class="row">
    <div *ngIf="course"class="countdown-wrapper col-md-6 col-md-offset-3">
      <ul class="countdown">
        <li>
          <span class="days">00</span>
          <p class="days_ref">Dias</p>
        </li>
        <li>
          <span class="hours">00</span>
          <p class="hours_ref">Horas</p>
        </li>
        <li>
          <span class="minutes">00</span>
          <p class="minutes_ref">Minutos</p>
        </li>
        <li>
          <span class="seconds last">00</span>
          <p class="seconds_ref">Segundos</p>
        </li>
      </ul>
      <div class="course-end col-md-6 col-md-offset-3"></div>
    </div>
  </div>
  <flash-messages></flash-messages>
  <div class="row wrapper">
    <div class="tabs">
      <mat-tab-group (selectedTabChange)="chartRender($event.index);">
        <mat-tab label="Acesso">
          <div class="container">
            <div class="row">
              <div class="chart col-md-12"><canvas id="cht-access"></canvas></div>
            </div>
          </div>
        </mat-tab>
        <mat-tab label="Progresso">
          <div class="container">
            <div class="row">
              <h2>PROGRESSO NAS ATIVIDADES DO CURSO</h2>
              <div class="chart col-md-12"><canvas id="cht-progress"></canvas></div>
            </div>
          </div>
        </mat-tab>
        <mat-tab label="Notas">
          <div class="container">
            <div class="row">
              <div class="chart col-md-12"><canvas id="cht-grades"></canvas></div>
            </div>
          </div>
        </mat-tab>
        <mat-tab label="VisÃ£o" class="tb-users">
          <div class="container">
            <div class="row">
              <div class="info">
                <mat-table #table [dataSource]="dataSource" matSort>
                  <ng-container matColumnDef="position">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> No. </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.position}} </mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="name">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Nome </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.name}} </mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="email">
                    <mat-header-cell *matHeaderCellDef> Email </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.email}} </mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="phone">
                    <mat-header-cell *matHeaderCellDef> Telefone </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.phone}} </mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="access">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Acesso</mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.lastaccess}} </mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="progress">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Progresso </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.progress}} </mat-cell>
                  </ng-container>
                  <ng-container matColumnDef="grade">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>Nota </mat-header-cell>
                    <mat-cell *matCellDef="let element"> {{element.grade}} </mat-cell>
                  </ng-container>
                  <mat-header-row *matHeaderRowDef="displayColumns"></mat-header-row>
                  <mat-row *matRowDef="let row; columns: displayColumns"></mat-row>
                </mat-table>
                <mat-paginator #paginator
                 [pageSize]="10"
                 [pageSizeOptions]="[5, 10, 20]"
                 [showFirstLastButtons]="true">
                </mat-paginator>
              </div>

            </div>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
</div>
<div class="container" *ngIf="isLoading">
  <div class="row" class="col-md-6 col-md-offset-3" style="margin-top:50px; text-align:center"><h1>CARREGANDO...</h1></div>
</div>
