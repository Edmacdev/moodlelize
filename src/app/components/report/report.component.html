<div class="topbar">
  <div class="container">
    <div class="row">
      <form class="col-md-12 select" action="index.html" method="post">
        <strong>Moodle:</strong>
        <mat-form-field class="mat-form" >
          <mat-select [(ngModel)]="form_moodle" name="form_moodle" (change)="getCourses()">
            <mat-option *ngFor="let moodle of moodles let i = index" [value]="moodle">{{moodle.name}}</mat-option>
          </mat-select>
        </mat-form-field>
        <strong>Curso:</strong>
        <mat-form-field class="mat-form">
          <mat-select [(ngModel)]="form_courseid" name="form_courseid" (change)="getCourse(form_courseid)">
            <mat-option  *ngFor="let course of courses let i = index" [value]="i">{{course.fullname}}</mat-option>
          </mat-select>
        </mat-form-field>
      </form>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-12 title" *ngIf="isCourseSelected">
      <h2>{{course.fullname}}</h2>
      <p *ngIf="enrolledUsers">Alunos matriculados: {{enrolledUsers.length}}</p>
    </div>
  </div>
  <div class="row">
    <div *ngIf="course"class="countdown-wrapper col-md-6 col-md-offset-3">
      <ul class="countdown">
        <li>
          <span class="days">00</span>
          <p class="days_ref">Dias</p>
        </li>
        <li>
          <span class="hours">00</span>
          <p class="hours_ref">Horas</p>
        </li>
        <li>
          <span class="minutes">00</span>
          <p class="minutes_ref">Minutos</p>
        </li>
        <li>
          <span class="seconds last">00</span>
          <p class="seconds_ref">Segundos</p>
        </li>
      </ul>
    </div>
  </div>
  <flash-messages></flash-messages>
  <div class="row">
    <div class="chart col-md-12"><canvas id="doughnut"></canvas></div>
  </div>
  <div class="row">
    <div class="tabs col-md-12" *ngIf="usersAccessData">
      <mat-tab-group>
        <mat-tab label="Nunca">
          <div >
            <table class="tb-users">
              <tr>
                <th>Nome</th>
                <th>email</th>
                <th>fone</th>
              </tr>
              <tr *ngFor="let user of usersAccessData[0]">
                <td >
                  <h5>{{user.firstname}} {{user.lastname}}</h5>
                </td>
                <td >
                  <h5>{{user.email}}</h5>
                </td>
                <td >
                  <h5>{{user.phone1}}</h5>
                </td>
              </tr>
            </table>

          </div>
        </mat-tab>
        <mat-tab label="Hoje">
          <div >
            <table class="tb-users">
              <tr>
                <th>Nome</th>
                <th>email</th>
                <th>fone</th>
              </tr>
              <tr *ngFor="let user of usersAccessData[1]">
                <td >
                  <h5>{{user.firstname}} {{user.lastname}}</h5>
                </td>
                <td >
                  <h5>{{user.email}}</h5>
                </td>
                <td >
                  <h5>{{user.phone1}}</h5>
                </td>
              </tr>
            </table>

          </div>
        </mat-tab>
        <mat-tab label="1-2 dias">
          <table class="tb-users">
            <tr>
              <th>Nome</th>
              <th>email</th>
              <th>fone</th>
            </tr>
            <tr *ngFor="let user of usersAccessData[2]">
              <td >
                <h5>{{user.firstname}} {{user.lastname}}</h5>
              </td>
              <td >
                <h5>{{user.email}}</h5>
              </td>
              <td >
                <h5>{{user.phone1}}</h5>
              </td>
            </tr>
          </table>
        </mat-tab>
        <mat-tab label="3-5 dias">
          <table class="tb-users">
            <tr>
              <th>Nome</th>
              <th>email</th>
              <th>fone</th>
            </tr>
            <tr *ngFor="let user of usersAccessData[3]">
              <td >
                <h5>{{user.firstname}} {{user.lastname}}</h5>
              </td>
              <td >
                <h5>{{user.email}}</h5>
              </td>
              <td >
                <h5>{{user.phone1}}</h5>
              </td>
            </tr>
          </table>
        </mat-tab>
        <mat-tab label="5-10 dias">
          <table class="tb-users">
            <tr>
              <th>Nome</th>
              <th>email</th>
              <th>fone</th>
            </tr>
            <tr *ngFor="let user of usersAccessData[4]">
              <td >
                <h5>{{user.firstname}} {{user.lastname}}</h5>
              </td>
              <td >
                <h5>{{user.email}}</h5>
              </td>
              <td >
                <h5>{{user.phone1}}</h5>
              </td>
            </tr>
          </table>
      </mat-tab>
        <mat-tab label="10+ dias">
          <table class="tb-users">
            <tr>
              <th>Nome</th>
              <th>email</th>
              <th>fone</th>
            </tr>
            <tr *ngFor="let user of usersAccessData[5]">
              <td >
                <h5>{{user.firstname}} {{user.lastname}}</h5>
              </td>
              <td >
                <h5>{{user.email}}</h5>
              </td>
              <td >
                <h5>{{user.phone1}}</h5>
              </td>
            </tr>
          </table>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
</div>
